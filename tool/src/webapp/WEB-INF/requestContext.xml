<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">

<!-- Aaron Zeckoski (aaronz@vt.edu), Rui Feng(fengr@vt.edu)-->
<beans>

	<!-- session scope backing beans here -->
	<bean id="evaluationBean"
		class="org.sakaiproject.evaluation.tool.EvaluationBean">
		<property name="external"
			ref="org.sakaiproject.evaluation.logic.EvalExternalLogic" />
		<property name="templatesLogic"
			ref="org.sakaiproject.evaluation.logic.EvalTemplatesLogic" />
		<property name="itemsLogic"
			ref="org.sakaiproject.evaluation.logic.EvalItemsLogic" />
		<property name="evalsLogic"
			ref="org.sakaiproject.evaluation.logic.EvalEvaluationsLogic" />
		<property name="assignsLogic"
			ref="org.sakaiproject.evaluation.logic.EvalAssignsLogic" />
		<property name="emailsLogic"
			ref="org.sakaiproject.evaluation.logic.EvalEmailsLogic" />
		<property name="settings"
			ref="org.sakaiproject.evaluation.logic.EvalSettings" />
	</bean>


	<!-- request scope backing beans here -->
	<bean id="settingsBean"
		class="org.sakaiproject.evaluation.tool.SettingsWBL">
		<property name="evalSettings"
			ref="org.sakaiproject.evaluation.logic.EvalSettings" />
		<property name="leafParser" ref="staticLeafParser" />
		<property name="messageLocator" ref="messageLocator" />
	</bean>

	<bean id="takeEvalBean"
		class="org.sakaiproject.evaluation.tool.TakeEvalBean">
	 <property name="responseBeanLocator" ref="responseBeanLocator" />
	</bean>

	<bean id="templateBBean"
		class="org.sakaiproject.evaluation.tool.TemplateBBean">
	  <property name="templateBeanLocator" ref="templateBeanLocator" />
      <property name="localTemplateLogic" ref="localTemplateLogic"/>
      <property name="templateItemBeanLocator" ref="templateItemBeanLocator"/>
      <property name="itemsLogic"
			ref="org.sakaiproject.evaluation.logic.EvalItemsLogic" />
	</bean>
  
	<bean id="itemsBean"
		class="org.sakaiproject.evaluation.tool.ItemsBean"
		init-method="init">
		<property name="external"
			ref="org.sakaiproject.evaluation.logic.EvalExternalLogic" />
		<property name="itemsLogic"
			ref="org.sakaiproject.evaluation.logic.EvalItemsLogic" />
		<property name="scalesLogic"
			ref="org.sakaiproject.evaluation.logic.EvalScalesLogic" />
		<property name="templatesLogic"
			ref="org.sakaiproject.evaluation.logic.EvalTemplatesLogic" />
	</bean>

	<bean id="reportHandlerHook"
		class="org.sakaiproject.evaluation.tool.ReportHandlerHook">
		<property name="viewparams" ref="viewParameters" />
		<property name="response" ref="httpServletResponse" />
		<property name="request" ref="httpServletRequest" />
		<property name="itemsLogic"
			ref="org.sakaiproject.evaluation.logic.EvalItemsLogic" />
		<property name="evalsLogic"
			ref="org.sakaiproject.evaluation.logic.EvalEvaluationsLogic" />
		<property name="responsesLogic"
			ref="org.sakaiproject.evaluation.logic.EvalResponsesLogic" />
	</bean>

	<bean id="templateBeanLocator"
		class="org.sakaiproject.evaluation.tool.TemplateBeanLocator">
		<property name="localTemplateLogic" ref="localTemplateLogic" />
	</bean>
	
	<bean id="evaluationBeanLocator"
		class="org.sakaiproject.evaluation.tool.EvaluationBeanLocator">
		<property name="external"
			ref="org.sakaiproject.evaluation.logic.EvalExternalLogic" />
		<property name="evalsLogic"
			ref="org.sakaiproject.evaluation.logic.EvalEvaluationsLogic" />
	</bean>

	<bean id="responseBeanLocator"
	  class="org.sakaiproject.evaluation.tool.ResponseBeanLocator">
	  <property name="localResponsesLogic" ref="localResponsesLogic" />
	</bean>

	<bean id="responseAnswersBeanLocator"
	  class="org.sakaiproject.evaluation.tool.ResponseAnswersBeanLocator">
	  <property name="localResponsesLogic" ref="localResponsesLogic" />
	  <property name="responseBeanLocator" ref="responseBeanLocator" />
	</bean>

	<bean id="answersBeanLocator"
	  class="org.sakaiproject.evaluation.tool.ResponseAnswersBeanLocator">
	</bean>

	<bean id="templateItemBeanLocator"
		class="org.sakaiproject.evaluation.tool.TemplateItemBeanLocator">
        <property name="localTemplateLogic" ref="localTemplateLogic" />
	</bean>

  <!-- evolver definitions here -->
  
  <!-- for now we will just hardwire the rich text control for this app to be
    the Sakai FCKEditor-based rich text control -->
  <bean id="richTextEvolver" class="org.springframework.beans.factory.config.BeanReferenceFactoryBean">
    <property name="targetBeanName" value="sakaiFCKTextEvolver"/>
  </bean>

	<!-- producers here -->
	<bean
		class="org.sakaiproject.evaluation.tool.producers.SummaryProducer">
		<property name="external"
			ref="org.sakaiproject.evaluation.logic.EvalExternalLogic" />
		<property name="evaluationsLogic"
			ref="org.sakaiproject.evaluation.logic.EvalEvaluationsLogic" />
		<property name="templatesLogic"
			ref="org.sakaiproject.evaluation.logic.EvalTemplatesLogic" />
		<property name="responsesLogic"
			ref="org.sakaiproject.evaluation.logic.EvalResponsesLogic" />
		<property name="messageLocator" ref="messageLocator" />
		<property name="locale" ref="requestLocale" />
	</bean>

	<bean
		class="org.sakaiproject.evaluation.tool.producers.ControlPanelProducer">
		<property name="assignsLogic"
			ref="org.sakaiproject.evaluation.logic.EvalAssignsLogic" />
		<property name="external"
			ref="org.sakaiproject.evaluation.logic.EvalExternalLogic" />
		<property name="evaluationsLogic"
			ref="org.sakaiproject.evaluation.logic.EvalEvaluationsLogic" />
		<property name="templatesLogic"
			ref="org.sakaiproject.evaluation.logic.EvalTemplatesLogic" />
		<property name="responsesLogic"
			ref="org.sakaiproject.evaluation.logic.EvalResponsesLogic" />
		<property name="messageLocator" ref="messageLocator" />
		<property name="locale" ref="requestLocale" />
	</bean>

	<bean
		class="org.sakaiproject.evaluation.tool.producers.AdministrateProducer">
		<property name="external"
			ref="org.sakaiproject.evaluation.logic.EvalExternalLogic" />
		<property name="messageLocator" ref="messageLocator" />
	</bean>

	<bean
		class="org.sakaiproject.evaluation.tool.producers.TemplateProducer">
		<property name="messageLocator" ref="messageLocator" />
		<property name="settings"
			ref="org.sakaiproject.evaluation.logic.EvalSettings" />
		<property name="externalLogic"
			ref="org.sakaiproject.evaluation.logic.EvalExternalLogic" />
    <property name="richTextEvolver" ref="richTextEvolver"/>
	</bean>

	<bean
		class="org.sakaiproject.evaluation.tool.producers.TemplateModifyProducer">
		<property name="messageLocator" ref="messageLocator" />
    <property name="localTemplateLogic" ref="localTemplateLogic"/>
		<property name="viewStateHandler" ref="viewStateHandler" />
	</bean>

	<bean
		class="org.sakaiproject.evaluation.tool.producers.ModifyScaledProducer">
		<property name="messageLocator" ref="messageLocator" />
		<property name="itemsBean" ref="itemsBean" />
		<property name="external"
			ref="org.sakaiproject.evaluation.logic.EvalExternalLogic" />
		<property name="templatesLogic"
			ref="org.sakaiproject.evaluation.logic.EvalTemplatesLogic" />
		<property name="itemsLogic"
			ref="org.sakaiproject.evaluation.logic.EvalItemsLogic" />
		<property name="settings"
			ref="org.sakaiproject.evaluation.logic.EvalSettings" />
	</bean>

	<bean
		class="org.sakaiproject.evaluation.tool.producers.PreviewItemProducer">
		<property name="messageLocator" ref="messageLocator" />
		<property name="itemsLogic"
			ref="org.sakaiproject.evaluation.logic.EvalItemsLogic" />
		<property name="itemRenderer" 
			ref="org.sakaiproject.evaluation.tool.renderers.ItemRenderer" />
	</bean>

	<bean
		class="org.sakaiproject.evaluation.tool.producers.PreviewEvalProducer">
		<property name="external"
			ref="org.sakaiproject.evaluation.logic.EvalExternalLogic" />
		<property name="evalsLogic"
			ref="org.sakaiproject.evaluation.logic.EvalEvaluationsLogic" />
		<property name="templatesLogic"
			ref="org.sakaiproject.evaluation.logic.EvalTemplatesLogic" />
		<property name="itemRenderer" 
			ref="org.sakaiproject.evaluation.tool.renderers.ItemRenderer" />
		<property name="messageLocator" ref="messageLocator" />
	</bean>

	<bean
		class="org.sakaiproject.evaluation.tool.producers.RemoveQuestionProducer">
		<property name="messageLocator" ref="messageLocator" />
		<property name="requestBeanGetter" ref="ELEvaluator" />
		<property name="itemsLogic"
			ref="org.sakaiproject.evaluation.logic.EvalItemsLogic" />
	</bean>

	<bean
		class="org.sakaiproject.evaluation.tool.producers.ModifyEssayProducer">
		<property name="messageLocator" ref="messageLocator" />
		<property name="templatesLogic"
			ref="org.sakaiproject.evaluation.logic.EvalTemplatesLogic" />
		<property name="external"
			ref="org.sakaiproject.evaluation.logic.EvalExternalLogic" />
		<property name="settings"
			ref="org.sakaiproject.evaluation.logic.EvalSettings" />
	</bean>

	<bean
		class="org.sakaiproject.evaluation.tool.producers.ModifyHeaderProducer">
		<property name="messageLocator" ref="messageLocator" />
		<property name="templatesLogic"
			ref="org.sakaiproject.evaluation.logic.EvalTemplatesLogic" />
		<property name="external"
			ref="org.sakaiproject.evaluation.logic.EvalExternalLogic" />
		<property name="settings"
			ref="org.sakaiproject.evaluation.logic.EvalSettings" />
	</bean>

	<bean
		class="org.sakaiproject.evaluation.tool.producers.ModifyBlockProducer">
		<property name="messageLocator" ref="messageLocator" />
		<property name="external"
			ref="org.sakaiproject.evaluation.logic.EvalExternalLogic" />
		<property name="itemsLogic"
			ref="org.sakaiproject.evaluation.logic.EvalItemsLogic" />
	</bean>

	<bean
		class="org.sakaiproject.evaluation.tool.producers.EvaluationStartProducer">
		<property name="templatesLogic"
			ref="org.sakaiproject.evaluation.logic.EvalTemplatesLogic" />
		<property name="external"
			ref="org.sakaiproject.evaluation.logic.EvalExternalLogic" />
		<property name="messageLocator" ref="messageLocator" />
	</bean>

	<bean
		class="org.sakaiproject.evaluation.tool.producers.EvaluationSettingsProducer">
		<property name="messageLocator" ref="messageLocator" />
		<property name="settings"
			ref="org.sakaiproject.evaluation.logic.EvalSettings" />
		<property name="evaluationBean" ref="evaluationBean" />
		<property name="externalLogic"
			ref="org.sakaiproject.evaluation.logic.EvalExternalLogic" />
	</bean>

	<bean
		class="org.sakaiproject.evaluation.tool.producers.EvaluationAssignProducer">
		<property name="external"
			ref="org.sakaiproject.evaluation.logic.EvalExternalLogic" />
		<property name="messageLocator" ref="messageLocator" />
	</bean>

	<bean
		class="org.sakaiproject.evaluation.tool.producers.EvaluationAssignConfirmProducer">
		<property name="external"
			ref="org.sakaiproject.evaluation.logic.EvalExternalLogic" />
		<property name="evaluationBean" ref="evaluationBean" />
		<property name="messageLocator" ref="messageLocator" />
	</bean>

	<bean
		class="org.sakaiproject.evaluation.tool.producers.PreviewEmailProducer">
		<property name="evaluationBean" ref="evaluationBean" />
		<property name="messageLocator" ref="messageLocator" />
	</bean>

	<bean
		class="org.sakaiproject.evaluation.tool.producers.ModifyEmailProducer">
		<property name="messageLocator" ref="messageLocator" />
	</bean>

	<bean
		class="org.sakaiproject.evaluation.tool.producers.ViewReportProducer">
		<property name="itemsLogic"
			ref="org.sakaiproject.evaluation.logic.EvalItemsLogic" />
		<property name="evalsLogic"
			ref="org.sakaiproject.evaluation.logic.EvalEvaluationsLogic" />
		<property name="responsesLogic"
			ref="org.sakaiproject.evaluation.logic.EvalResponsesLogic" />
		<property name="messageLocator" ref="messageLocator" />
	</bean>

	<bean
		class="org.sakaiproject.evaluation.tool.producers.ViewEssayResponseProducer">
		<property name="evalsLogic"
			ref="org.sakaiproject.evaluation.logic.EvalEvaluationsLogic" />
		<property name="itemsLogic"
			ref="org.sakaiproject.evaluation.logic.EvalItemsLogic" />
		<property name="responsesLogic"
			ref="org.sakaiproject.evaluation.logic.EvalResponsesLogic" />
		<property name="messageLocator" ref="messageLocator" />			
	</bean>

	<bean
		class="org.sakaiproject.evaluation.tool.producers.TakeEvalProducer">
		<property name="external"
			ref="org.sakaiproject.evaluation.logic.EvalExternalLogic" />
		<property name="itemsLogic"
			ref="org.sakaiproject.evaluation.logic.EvalItemsLogic" />
		<property name="evalsLogic"
			ref="org.sakaiproject.evaluation.logic.EvalEvaluationsLogic" />
		<property name="messageLocator" ref="messageLocator" />
	</bean>

	<bean
		class="org.sakaiproject.evaluation.tool.producers.RemoveEvalProducer">
		<property name="evalsLogic"
			ref="org.sakaiproject.evaluation.logic.EvalEvaluationsLogic" />
		<property name="messageLocator" ref="messageLocator" />
		<property name="locale" ref="requestLocale" />
	</bean>

	<bean
		class="org.sakaiproject.evaluation.tool.producers.RemoveTemplateProducer">
		<property name="templatesLogic"
			ref="org.sakaiproject.evaluation.logic.EvalTemplatesLogic" />
		<property name="evalsLogic"
			ref="org.sakaiproject.evaluation.logic.EvalEvaluationsLogic" />
		<property name="settings"
			ref="org.sakaiproject.evaluation.logic.EvalSettings" />
		<property name="messageLocator" ref="messageLocator" />
	</bean>

	<bean
		class="org.sakaiproject.evaluation.tool.producers.ScaleControlProducer">
		<property name="scalesLogic"
			ref="org.sakaiproject.evaluation.logic.EvalScalesLogic" />
		<property name="external"
			ref="org.sakaiproject.evaluation.logic.EvalExternalLogic" />
		<property name="messageLocator" ref="messageLocator" />
	</bean>
</beans>