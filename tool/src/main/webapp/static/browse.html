<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Browse for groups</title>
<link href="/local-skins/tool_base.css" type="text/css" rel="stylesheet" media="all" />
<!--  TODO: Need to pull current skin from somewhere. -->
<link href="/local-skins/weblearn-beta/tool.css" type="text/css" rel="stylesheet" media="all" />

<style type="text/css">
a:visited {
	text-decoration:none !important;
}
</style>
<script type="text/javascript" src="js/css.js"></script>
<script type="text/javascript" src="js/jquery-1.3.js"></script>
<script type="text/javascript" src="js/jquery.tree.js"></script>

<script language="Javascript">


jQuery(function() {
	jQuery("#browseTree").tree(
			{
				data: {
					type: "json",
					async: true,
					opts: {
						url: "/external-groups/rest/group/browse/",
						async: true
					}
				}, 
				ui : {
					context: "false"
				},
				types : {
					default: {
						renameable: false,
						deletable: false,
						creatable: false,
						draggable: false,
						clickable: function(node, tree) {
							return $(node).attr("groupId");
						}
					}
				},
				callback : {
					// Take care of refresh calls - n will be false only when the whole tree is refreshed or loaded of the first time
					beforedata : function (n, t) {
						return { id : $(n).attr("id") || "" };
					},
					onselect : function (n, t) {
						alert($(n).attr("groupId"));
					}
				}
			}
	);

});

</script>
</head>
<body>
<div>
<h4>Select a group</h4>
</div>
<div id="browseTree">
</div>

</body>
</html>