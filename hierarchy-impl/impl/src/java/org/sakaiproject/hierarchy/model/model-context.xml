<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN"
		"http://www.springframework.org/dtd/spring-beans.dtd">

<!--
	This document is READ ONLY.  To make modifications to this document, you must use the
	"SpringCustomConfig" snippet.  Any content there will be added correctly.
-->
<beans>
  <!-- CustomSpringCustomConfig -->
  <!-- CustomSpringDatasourceConfig -->
  <!-- CustomSpringHibernateConfig -->
  <!-- Custom SpringFactoryConfig -->
  <!-- Transaction Proxy for HierarchyDAO -->
  <bean id="org.sakaiproject.hierarchy.api.dao.HierarchyDAO"
    class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
    <property name="transactionManager">
      <ref bean="org.sakaiproject.springframework.orm.hibernate.GlobalTransactionManager"/>
    </property>
    <property name="transactionAttributes">
      <props>
        <prop key="save*">PROPAGATION_REQUIRED</prop>
        <prop key="update*">PROPAGATION_REQUIRED</prop>
        <prop key="delete*">PROPAGATION_REQUIRED</prop>
      </props>
    </property>
    <property name="target">
      <ref bean="org.sakaiproject.hierarchy.api.dao.HierarchyDAO.impl"/>
    </property>
  </bean>
  <!-- Implementation for HierarchyDAO -->
  <bean id="org.sakaiproject.hierarchy.api.dao.HierarchyDAO.impl"
    class="org.sakaiproject.hierarchy.impl.model.dao.HierarchyDAO">
    <property name="sessionFactory">
      <ref bean="org.sakaiproject.springframework.orm.hibernate.GlobalSessionFactory"/>
    </property>
  </bean>
</beans>
